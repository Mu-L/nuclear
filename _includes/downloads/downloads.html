<section class="downloads">
    <div class="container">
        <h1>Downloads</h1>

        <!-- OS Selection Buttons -->
        <div class="os-selection">
            <input type="radio" id="mac-select" name="os-choice" class="os-radio" checked>
            <input type="radio" id="linux-select" name="os-choice" class="os-radio">
            <input type="radio" id="windows-select" name="os-choice" class="os-radio">

            <div class="os-buttons">
                <label for="mac-select" class="os-button">
                    {% include svg/apple.svg %}
                    <span>macOS</span>
                </label>

                <label for="linux-select" class="os-button">
                    {% include svg/linux.svg %}
                    <span>Linux</span>
                </label>

                <label for="windows-select" class="os-button">
                    {% include svg/windows.svg %}
                    <span>Windows</span>
                </label>
            </div>

            <!-- Download Content Areas -->
            <div class="download-areas">
                <!-- macOS Downloads -->
                <div class="download-area" id="mac-downloads">
                    <div class="box mac-box">
                        <div class="mac-content">
                            <div class="download-group left">
                                <h4>Apple Silicon (M1/M2)</h4>
                                <div class="download-links">
                                    <a target="_blank" rel="noreferrer"
                                        href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-arm64.dmg">
                                        <img src="https://img.shields.io/badge/Download-DMG_(ARM64)-blue?style=for-the-badge&logo=apple&logoColor=white"
                                            alt="Download DMG for Apple CPU">
                                    </a>
                                </div>

                                <h4>Intel Processor</h4>
                                <div class="download-links">
                                    <a target="_blank" rel="noreferrer"
                                        href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-x64.dmg">
                                        <img src="https://img.shields.io/badge/Download-DMG_(Intel)-blue?style=for-the-badge&logo=apple&logoColor=white"
                                            alt="Download DMG for Intel CPU">
                                    </a>
                                </div>
                            </div>

                            <div class="troubleshooting-section">
                                <!-- Mac Troubleshooting Accordion -->
                                <div class="accordion">
                                    <input type="checkbox" id="mac-troubleshooting" class="accordion-checkbox">
                                    <label for="mac-troubleshooting" class="accordion-label">
                                        <h4>⚠️ Having trouble opening Nuclear?</h4>
                                        {% include svg/chevron-down.svg %}
                                    </label>
                                    <div class="accordion-content">
                                        <div class="accordion-warning">
                                            <p>MacOS may block unsigned apps. Try these solutions:</p>

                                            <h4>1. Remove quarantine attribute</h4>
                                            <code>sudo xattr -r -d com.apple.quarantine /Applications/Nuclear.app
                                                <button class="copy-button" onclick="copyToClipboard(this, 'sudo xattr -r -d com.apple.quarantine /Applications/Nuclear.app')">
                                                    {% include svg/copy.svg %}
                                                </button>
                                            </code>

                                            <h4>2. Allow Nuclear to run</h4>
                                            <ol>
                                                <li>Open System Preferences → Security & Privacy</li>
                                                <li>Click "Open Anyway" next to Nuclear</li>
                                            </ol>

                                            <h4>3. Disable Gatekeeper (Advanced)</h4>
                                            <code>sudo spctl --master-disable
                                                <button class="copy-button" onclick="copyToClipboard(this, 'sudo spctl --master-disable')">
                                                    {% include svg/copy.svg %}
                                                </button>
                                            </code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Linux Downloads -->
                <div class="download-area" id="linux-downloads">
                    <div class="box">
                        <div class="download-group">
                            <h4>Universal Install (Recommended)</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-x86_64.AppImage">
                                    <img src="https://img.shields.io/badge/Download-AppImage-blue?style=for-the-badge&logo=linux&logoColor=white"
                                        alt="Download AppImage">
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://flathub.org/apps/org.js.nuclear.Nuclear">
                                    <img src="https://img.shields.io/badge/Download-Flatpak-blue?style=for-the-badge&logo=flathub&logoColor=white"
                                        alt="Download Flatpak">
                                </a>
                            </div>

                            <h4>Distribution-specific Packages</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-amd64.deb">
                                    <img src="https://img.shields.io/badge/Download-Debian%20package-blue?style=for-the-badge&logo=debian&logoColor=white"
                                        alt="Download Debian package">
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-x86_64.rpm">
                                    <img src="https://img.shields.io/badge/Download-RPM-blue?style=for-the-badge&logo=fedora&logoColor=white"
                                        alt="Download RPM">
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://aur.archlinux.org/packages/nuclear-player-bin">
                                    <img src="https://img.shields.io/badge/Download-AUR-blue?style=for-the-badge&logo=arch-linux&logoColor=white"
                                        alt="Download AUR">
                                </a>
                            </div>

                            <h4>Additional Formats</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-amd64.snap">
                                    <img src="https://img.shields.io/badge/Download-Snap-blue?style=for-the-badge&logo=snapcraft&logoColor=white"
                                        alt="Download Snap">
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-x64.tar.gz">
                                    <img src="https://img.shields.io/badge/Download-Tarball-blue?style=for-the-badge&logo=linux&logoColor=white"
                                        alt="Download Tarball">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Windows Downloads -->
                <div class="download-area" id="windows-downloads">
                    <div class="box">
                        <div class="download-group">
                            <h4>Easy Install (Recommended)</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear.Setup.0.6.42.exe">
                                    <img src="https://img.shields.io/badge/Download-Installer-blue?style=for-the-badge&logo=windows&logoColor=white"
                                        alt="Download Installer">
                                </a>
                            </div>

                            <h4>Portable Version</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.42/nuclear-v0.6.42-x64.exe">
                                    <img src="https://img.shields.io/badge/Download-Portable_EXE-blue?style=for-the-badge&logo=windows&logoColor=white"
                                        alt="Download portable EXE">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="guide">
            <h2>Need help with Nuclear?</h2>
            <div class="buttons">
                <a class="faq" target="_blank" rel="noreferrer" href="https://nukeop.gitbook.io/nuclear/">
                    Read User Guide & FAQ
                </a>
                <a class="soc-button" href="https://fosstodon.org/@nuclearplayer" rel="me">
                    {% include svg/mastodon.svg %} Follow on Mastodon
                </a>
                <a class="soc-button" href="https://discord.gg/JqPjKxE" rel="me">
                    {% include svg/discord.svg %} Join Discord
                </a>
            </div>
        </div>
    </div>
</section>

<script>
    function copyToClipboard(button, text) {
        navigator.clipboard.writeText(text).then(function () {
            button.classList.add('copied');
            const originalIcon = button.innerHTML;
            button.innerHTML = '✓';

            setTimeout(() => {
                button.innerHTML = originalIcon;
                button.classList.remove('copied');
            }, 1500);
        }).catch(function (err) {
            console.error('Failed to copy:', err);
        });
    }
</script>